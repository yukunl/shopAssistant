{"ast":null,"code":"var _jsxFileName = \"/Users/a-kun/Desktop/639/dialogflow-beta-2020/src/components/Product.js\";\nimport React from \"react\";\nimport \"../styles/App.css\";\nimport { Link } from \"react-router-dom\";\nimport { Button, Card, Image, ButtonGroup, Toast } from \"react-bootstrap\";\nimport Rating from \"@material-ui/lab/Rating\";\nimport Box from \"@material-ui/core/Box\";\nimport { TiShoppingCart, TiHome } from \"react-icons/ti\";\n\nclass Product extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getReviewList = () => {\n      let reviews = [];\n\n      for (const review of this.state.reviewsList) {\n        reviews.push(React.createElement(Card, {\n          key: review.id,\n          style: styles.review,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, React.createElement(Card.Body, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }, React.createElement(Card.Title, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, React.createElement(Box, {\n          component: \"fieldset\",\n          mb: 3,\n          borderColor: \"transparent\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }, React.createElement(Rating, {\n          name: \"rating\",\n          value: review.stars,\n          precision: 0.1,\n          readOnly: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }))), React.createElement(Card.Subtitle, {\n          className: \"mb-2 text-muted\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, review.title), React.createElement(Card.Text, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, review.text))));\n      }\n\n      return reviews;\n    };\n\n    this.state = {\n      reviewsList: [],\n      quantity: 1,\n      showToast: false\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      reviewList: this.fetchReviews()\n    });\n  }\n\n  async fetchReviews() {\n    const baseUrl = window.$ENDPOINT_URL;\n    let myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    myHeaders.append(\"x-access-token\", localStorage.getItem(\"token\"));\n    let requestOptions = {\n      method: \"GET\",\n      headers: myHeaders,\n      redirect: \"follow\"\n    };\n    let response = await fetch(baseUrl + this.props.path + \"/reviews\", requestOptions);\n    let result = await response.json();\n    this.setState({\n      reviewsList: result.reviews\n    });\n  }\n\n  render() {\n    return React.createElement(React.Fragment, null, React.createElement(Link, {\n      to: '/' + this.props.username,\n      className: \"button\",\n      style: {\n        margin: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(TiHome, {\n      style: styles.homeIcon,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    })), React.createElement(Link, {\n      to: '/' + this.props.username + '/cart',\n      className: \"button\",\n      style: {\n        margin: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(TiShoppingCart, {\n      style: styles.shoppingCartIcon,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      style: styles.pageTitle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, this.props.product.name))), React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: styles.pageBody,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(Image, {\n      src: this.props.product.image,\n      style: {\n        width: 400,\n        marginBottom: 25\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }), this.props.product.description, this.getQuantityButtons(), React.createElement(Button, {\n      variant: \"outline-dark\",\n      onClick: () => this.addToCart(),\n      style: {\n        marginTop: 20,\n        marginBottom: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Add to cart\"), React.createElement(Toast, {\n      onClose: () => this.setState({\n        showToast: false\n      }),\n      show: this.state.showToast,\n      delay: 3000,\n      autohide: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(Toast.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"\\u2713 Added to cart\")), React.createElement(\"div\", {\n      style: {\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, this.getReviewList()))));\n  }\n\n  async addToCart() {\n    let myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    myHeaders.append(\"x-access-token\", localStorage.getItem('token'));\n    let requestOptions = {\n      method: 'POST',\n      headers: myHeaders,\n      redirect: 'follow'\n    };\n\n    for (let i = 0; i < this.state.quantity; i++) {\n      await fetch(window.$ENDPOINT_URL + '/application/products/' + this.props.product.id, requestOptions);\n    }\n\n    this.setState({\n      showToast: true\n    });\n  }\n\n  getQuantityButtons() {\n    return React.createElement(ButtonGroup, {\n      style: {\n        display: 'flex',\n        flexDirection: 'row',\n        marginTop: 30\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"outline-dark\",\n      onClick: () => this.decrease(),\n      style: {\n        width: 40\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"-\"), React.createElement(Button, {\n      variant: \"outline-dark\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, this.state.quantity), React.createElement(Button, {\n      variant: \"outline-dark\",\n      onClick: () => this.increase(),\n      style: {\n        width: 40\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"+\"));\n  }\n\n  decrease() {\n    if (this.state.quantity > 1) {\n      this.setState({\n        quantity: this.state.quantity - 1\n      });\n    }\n  }\n\n  increase() {\n    this.setState({\n      quantity: this.state.quantity + 1\n    });\n  }\n\n}\n\nconst styles = {\n  pageTitle: {\n    height: \"20%\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    flexDirection: \"row\",\n    fontWeight: \"bold\"\n  },\n  pageBody: {\n    height: \"40%\",\n    width: '40%',\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    flexDirection: \"column\",\n    margin: \"2em\"\n  },\n  cardBody: {\n    margin: \"1em\"\n  },\n  shoppingCartIcon: {\n    height: \"3em\",\n    width: \"3em\",\n    position: \"absolute\",\n    right: 0,\n    top: 0,\n    marginTop: \"0.5em\",\n    marginRight: \"0.5em\"\n  },\n  homeIcon: {\n    height: \"3em\",\n    width: \"3em\",\n    position: \"absolute\",\n    left: 10,\n    top: 0,\n    marginTop: \"0.5em\",\n    marginRight: \"0.5em\"\n  },\n  review: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    flexDirection: \"row\",\n    marginLeft: \"2em\",\n    marginRight: \"2em\",\n    marginTop: \"2em\"\n  },\n  image: {\n    width: 400\n  }\n};\nexport default Product;","map":{"version":3,"sources":["/Users/a-kun/Desktop/639/dialogflow-beta-2020/src/components/Product.js"],"names":["React","Link","Button","Card","Image","ButtonGroup","Toast","Rating","Box","TiShoppingCart","TiHome","Product","Component","constructor","props","getReviewList","reviews","review","state","reviewsList","push","id","styles","stars","title","text","quantity","showToast","componentDidMount","setState","reviewList","fetchReviews","baseUrl","window","$ENDPOINT_URL","myHeaders","Headers","append","localStorage","getItem","requestOptions","method","headers","redirect","response","fetch","path","result","json","render","username","margin","homeIcon","shoppingCartIcon","pageTitle","product","name","display","alignItems","justifyContent","pageBody","image","width","marginBottom","description","getQuantityButtons","addToCart","marginTop","i","flexDirection","decrease","increase","height","fontWeight","cardBody","position","right","top","marginRight","left","marginLeft"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"../styles/App.css\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { Button, Card, Image, ButtonGroup, Toast } from \"react-bootstrap\";\r\n\r\nimport Rating from \"@material-ui/lab/Rating\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nimport { TiShoppingCart, TiHome } from \"react-icons/ti\";\r\n\r\nclass Product extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      reviewsList: [],\r\n      quantity: 1,\r\n      showToast: false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ reviewList: this.fetchReviews() });\r\n  }\r\n\r\n  async fetchReviews() {\r\n    const baseUrl = window.$ENDPOINT_URL;\r\n\r\n    let myHeaders = new Headers();\r\n    myHeaders.append(\"Content-Type\", \"application/json\");\r\n    myHeaders.append(\"x-access-token\", localStorage.getItem(\"token\"));\r\n\r\n    let requestOptions = {\r\n      method: \"GET\",\r\n      headers: myHeaders,\r\n      redirect: \"follow\"\r\n    };\r\n\r\n    let response = await fetch(\r\n      baseUrl +  this.props.path + \"/reviews\",\r\n      requestOptions\r\n    );\r\n    let result = await response.json();\r\n\r\n    this.setState({ reviewsList: result.reviews });\r\n  }\r\n\r\n  getReviewList = () => {\r\n    let reviews = [];\r\n    for (const review of this.state.reviewsList) {\r\n      reviews.push(\r\n        <Card key={review.id} style={styles.review}>\r\n          <Card.Body>\r\n            <Card.Title>\r\n              <Box component=\"fieldset\" mb={3} borderColor=\"transparent\">\r\n                <Rating\r\n                  name=\"rating\"\r\n                  value={review.stars}\r\n                  precision={0.1}\r\n                  readOnly\r\n                />\r\n              </Box>\r\n            </Card.Title>\r\n            <Card.Subtitle className=\"mb-2 text-muted\">\r\n              {review.title}\r\n            </Card.Subtitle>\r\n            <Card.Text>{review.text}</Card.Text>\r\n          </Card.Body>\r\n        </Card>\r\n      );\r\n    }\r\n\r\n    return reviews;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <Link to={'/' + this.props.username} className='button' style={{margin: 20}}>\r\n          <TiHome style={styles.homeIcon} />\r\n        </Link>\r\n        <Link to={'/' + this.props.username + '/cart'} className='button' style={{margin: 20}}>\r\n          <TiShoppingCart style={styles.shoppingCartIcon} />\r\n        </Link>\r\n        <div style={styles.pageTitle}>\r\n          <span>\r\n            <h1>{this.props.product.name}</h1>\r\n          </span>\r\n        </div>\r\n        <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\r\n          <div style={styles.pageBody}>\r\n            <Image src={this.props.product.image} style={{width: 400, marginBottom: 25}}/>\r\n            {this.props.product.description}\r\n            {this.getQuantityButtons()}\r\n            <Button variant='outline-dark' onClick={() => this.addToCart()} style={{marginTop: 20, marginBottom: 20}}>Add to cart</Button>\r\n            <Toast onClose={() => this.setState({showToast: false})} show={this.state.showToast} delay={3000} autohide>\r\n              <Toast.Body>âœ“ Added to cart</Toast.Body>\r\n            </Toast>\r\n            <div style={{width: '100%'}}>{this.getReviewList()}</div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  async addToCart() {\r\n    let myHeaders = new Headers();\r\n    myHeaders.append(\"Content-Type\", \"application/json\");\r\n    myHeaders.append(\"x-access-token\", localStorage.getItem('token'));\r\n\r\n    let requestOptions = {\r\n      method: 'POST',\r\n      headers: myHeaders,\r\n      redirect: 'follow'\r\n    };\r\n\r\n    for(let i = 0; i < this.state.quantity; i++) {\r\n      await fetch(window.$ENDPOINT_URL + '/application/products/' + this.props.product.id, requestOptions)\r\n    }\r\n    this.setState({showToast: true})\r\n  }\r\n\r\n  getQuantityButtons() {\r\n    return (\r\n      <ButtonGroup style={{display: 'flex', flexDirection: 'row', marginTop: 30}}>\r\n        <Button variant='outline-dark' onClick={() => this.decrease()} style={{width: 40}}>-</Button>\r\n        <Button variant='outline-dark' disabled>{this.state.quantity}</Button>\r\n        <Button variant='outline-dark' onClick={() => this.increase()} style={{width: 40}}>+</Button>\r\n      </ButtonGroup>\r\n    )\r\n  }\r\n\r\n  decrease() {\r\n    if(this.state.quantity > 1) {\r\n      this.setState({quantity: this.state.quantity - 1})\r\n    }\r\n  }\r\n\r\n  increase() {\r\n    this.setState({quantity: this.state.quantity + 1})\r\n  }\r\n}\r\n\r\nconst styles = {\r\n  pageTitle: {\r\n    height: \"20%\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"row\",\r\n    fontWeight: \"bold\"\r\n  },\r\n  pageBody: {\r\n    height: \"40%\",\r\n    width: '40%',\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"column\",\r\n    margin: \"2em\"\r\n  },\r\n  cardBody: {\r\n    margin: \"1em\"\r\n  },\r\n  shoppingCartIcon: {\r\n    height: \"3em\",\r\n    width: \"3em\",\r\n    position: \"absolute\",\r\n    right: 0,\r\n    top: 0,\r\n    marginTop: \"0.5em\",\r\n    marginRight: \"0.5em\"\r\n  },\r\n  homeIcon: {\r\n    height: \"3em\",\r\n    width: \"3em\",\r\n    position: \"absolute\",\r\n    left: 10,\r\n    top: 0,\r\n    marginTop: \"0.5em\",\r\n    marginRight: \"0.5em\"\r\n  },\r\n  review: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"row\",\r\n    marginLeft: \"2em\",\r\n    marginRight: \"2em\",\r\n    marginTop: \"2em\",\r\n  },\r\n  image: {\r\n    width: 400\r\n  }\r\n};\r\n\r\nexport default Product;\r\n"]},"metadata":{},"sourceType":"module"}