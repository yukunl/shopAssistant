{"ast":null,"code":"import _defineProperty from \"/Users/a-kun/Desktop/639/dialogflow-beta-2020/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/a-kun/Desktop/639/dialogflow-beta-2020/src/components/Cart.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from \"react\";\nimport \"../styles/App.css\";\nimport { Link } from \"react-router-dom\";\nimport Button from \"react-bootstrap/Button\";\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\nimport Card from \"react-bootstrap/Card\";\nimport Image from \"react-bootstrap/Image\";\nimport { TiHome } from \"react-icons/ti\";\n\nclass Cart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      products: []\n    };\n  }\n\n  async componentDidMount() {\n    await this.fetchProducts();\n  }\n\n  render() {\n    if (this.state.products.length === 0) {\n      return React.createElement(React.Fragment, null, React.createElement(Link, {\n        to: '/' + this.props.username,\n        className: \"button\",\n        style: {\n          margin: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }, React.createElement(TiHome, {\n        style: styles.homeIcon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: _objectSpread({}, styles.container, {\n          fontSize: 30\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33\n        },\n        __self: this\n      }, \"Looks like you don't have any items in your cart\"));\n    }\n\n    return React.createElement(React.Fragment, null, React.createElement(Link, {\n      to: '/' + this.props.username,\n      className: \"button\",\n      style: {\n        margin: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, React.createElement(TiHome, {\n      style: styles.homeIcon,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      style: _objectSpread({}, styles.container, {\n        fontSize: 30\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'row'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, this.getProducts()), \"Total: $\", this.getTotalPrice(), React.createElement(Button, {\n      variant: \"outline-dark\",\n      style: _objectSpread({}, styles.buttonStyle, {\n        marginTop: 20\n      }),\n      onClick: () => this.clearCart(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, \"Clear cart\"), React.createElement(Link, {\n      to: '/' + this.props.username + '/cart-review',\n      className: \"basic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"outline-dark\",\n      style: _objectSpread({}, styles.buttonStyle, {\n        marginTop: 20\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, \"Purchase\"))));\n  }\n\n  async fetchProducts() {\n    while (true) {\n      let myHeaders = new Headers();\n      myHeaders.append(\"Content-Type\", \"application/json\");\n      myHeaders.append(\"x-access-token\", localStorage.getItem('token'));\n      let requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n      };\n      let productsResponse = await fetch(window.$ENDPOINT_URL + '/application/products', requestOptions);\n\n      if (!productsResponse.ok) {\n        await this.delay(500);\n        continue;\n      }\n\n      let productsResult = await productsResponse.json();\n      this.setState({\n        products: productsResult.products\n      });\n      await this.delay(500);\n    }\n  }\n\n  getProducts() {\n    let products = [];\n\n    for (const product of this.state.products) {\n      products.push(React.createElement(Link, {\n        key: product.id,\n        to: '/' + this.props.username + '/' + product.category + '/products/' + product.id,\n        className: \"basic\",\n        style: {\n          margin: '1em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(Card, {\n        key: product.name,\n        style: styles.cardBody,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(Card.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(Card.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, product.name)), React.createElement(Card.Subtitle, {\n        style: {\n          marginTop: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"$\", product.price), React.createElement(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          justifyContent: 'center',\n          fontSize: 18\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(Image, {\n        style: {\n          width: 150,\n          marginBottom: 10\n        },\n        src: product.image,\n        rounded: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }), this.getQuantityButtons(product.id), React.createElement(\"div\", {\n        style: {\n          marginTop: 10,\n          fontSize: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"$\", product.price * product.count))))));\n    }\n\n    return products;\n  }\n\n  getTotalPrice() {\n    let price = 0;\n\n    for (const product of this.state.products) {\n      price += product.count * product.price;\n    }\n\n    return price;\n  }\n\n  getQuantityButtons(id) {\n    let product = null;\n\n    for (const iProduct of this.state.products) {\n      if (iProduct.id === id) {\n        product = iProduct;\n        break;\n      }\n    }\n\n    return React.createElement(ButtonGroup, {\n      style: {\n        display: 'flex',\n        flexDirection: 'row',\n        marginTop: 30\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"outline-dark\",\n      onClick: e => this.decrease(e, id),\n      style: {\n        width: 40\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"-\"), React.createElement(Button, {\n      variant: \"outline-dark\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, product.count), React.createElement(Button, {\n      variant: \"outline-dark\",\n      onClick: e => this.increase(e, id),\n      style: {\n        width: 40\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"+\"));\n  }\n\n  async decrease(e, id) {\n    e.preventDefault();\n    let myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    myHeaders.append(\"x-access-token\", localStorage.getItem('token'));\n    let requestOptions = {\n      method: 'DELETE',\n      headers: myHeaders,\n      redirect: 'follow'\n    };\n    await fetch(window.$ENDPOINT_URL + '/application/products/' + id, requestOptions);\n    await this.fetchProducts();\n  }\n\n  async increase(e, id) {\n    e.preventDefault();\n    let myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    myHeaders.append(\"x-access-token\", localStorage.getItem('token'));\n    let requestOptions = {\n      method: 'POST',\n      headers: myHeaders,\n      redirect: 'follow'\n    };\n    await fetch(window.$ENDPOINT_URL + '/application/products/' + id, requestOptions);\n    await this.fetchProducts();\n  }\n\n  async clearCart() {\n    let myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    myHeaders.append(\"x-access-token\", localStorage.getItem('token'));\n    let requestOptions = {\n      method: 'DELETE',\n      headers: myHeaders,\n      redirect: 'follow'\n    };\n    await fetch(window.$ENDPOINT_URL + '/application/products', requestOptions);\n    await this.fetchProducts();\n  }\n\n  async delay(delayInms) {\n    return new Promise(resolve => {\n      setTimeout(() => {\n        resolve(2);\n      }, delayInms);\n    });\n  }\n\n}\n\nconst styles = {\n  container: {\n    height: \"100%\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\"\n  },\n  cardBody: {\n    width: 300\n  },\n  homeIcon: {\n    height: \"3em\",\n    width: \"3em\",\n    position: \"absolute\",\n    left: 10,\n    top: 0,\n    marginTop: \"0.5em\",\n    marginRight: \"0.5em\"\n  }\n};\nexport default Cart;","map":{"version":3,"sources":["/Users/a-kun/Desktop/639/dialogflow-beta-2020/src/components/Cart.js"],"names":["React","Link","Button","ButtonGroup","Card","Image","TiHome","Cart","Component","constructor","props","state","products","componentDidMount","fetchProducts","render","length","username","margin","styles","homeIcon","container","fontSize","display","flexDirection","getProducts","getTotalPrice","buttonStyle","marginTop","clearCart","myHeaders","Headers","append","localStorage","getItem","requestOptions","method","headers","redirect","productsResponse","fetch","window","$ENDPOINT_URL","ok","delay","productsResult","json","setState","product","push","id","category","name","cardBody","price","alignItems","justifyContent","width","marginBottom","image","getQuantityButtons","count","iProduct","e","decrease","increase","preventDefault","delayInms","Promise","resolve","setTimeout","height","position","left","top","marginRight"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"../styles/App.css\";\n\nimport {Link} from \"react-router-dom\";\n\nimport Button from \"react-bootstrap/Button\";\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\nimport Card from \"react-bootstrap/Card\";\nimport Image from \"react-bootstrap/Image\";\n\nimport { TiHome } from \"react-icons/ti\";\n\nclass Cart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      products: []\n    };\n  }\n\n  async componentDidMount() {\n    await this.fetchProducts();\n  }\n\n  render() {\n    if(this.state.products.length === 0) {\n      return (\n        <>\n          <Link to={'/' + this.props.username} className='button' style={{margin: 20}}>\n            <TiHome style={styles.homeIcon} />\n          </Link>\n\n          <div style={{...styles.container, fontSize: 30}}>\n            Looks like you don't have any items in your cart\n          </div>\n        </>\n      )\n    }\n    return (\n      <>\n        <Link to={'/' + this.props.username} className='button' style={{margin: 20}}>\n          <TiHome style={styles.homeIcon} />\n        </Link>\n\n        <div style={{...styles.container, fontSize: 30}}>\n          <div style={{display: 'flex', flexDirection: 'row'}}>{this.getProducts()}</div>\n          Total: ${this.getTotalPrice()}\n          <Button variant=\"outline-dark\" style={{...styles.buttonStyle, marginTop: 20}} onClick={() => this.clearCart()}>\n            Clear cart\n          </Button>\n          <Link to={'/' + this.props.username + '/cart-review'} className='basic'>\n            <Button variant=\"outline-dark\" style={{...styles.buttonStyle, marginTop: 20}}>\n              Purchase\n            </Button>\n          </Link>\n        </div>\n      </>\n    );\n  }\n\n  async fetchProducts() {\n    while(true) {\n      let myHeaders = new Headers();\n      myHeaders.append(\"Content-Type\", \"application/json\");\n      myHeaders.append(\"x-access-token\", localStorage.getItem('token'));\n\n      let requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n      };\n\n      let productsResponse = await fetch(window.$ENDPOINT_URL + '/application/products', requestOptions);\n      if(!productsResponse.ok) {\n        await this.delay(500);\n        continue;\n      }\n      let productsResult = await productsResponse.json();\n\n      this.setState({products: productsResult.products});\n\n      await this.delay(500);\n    }\n  }\n\n  getProducts() {\n    let products = [];\n\n    for(const product of this.state.products) {\n      products.push(\n        <Link key={product.id} to={'/' + this.props.username + '/' + product.category + '/products/' + product.id} className='basic' style={{margin: '1em'}}>\n          <Card key={product.name} style={styles.cardBody}>\n            <Card.Body>\n              <Card.Title>\n                <h2>{product.name}</h2>\n              </Card.Title>\n              <Card.Subtitle style={{ marginTop: 5 }}>\n                ${product.price}\n              </Card.Subtitle>\n              <div style={{display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', fontSize: 18}}>\n                <Image style={{ width: 150, marginBottom: 10 }} src={product.image} rounded/>\n                {this.getQuantityButtons(product.id)}\n                <div style={{marginTop: 10, fontSize: 30}}>${product.price * product.count}</div>\n              </div>\n            </Card.Body>\n          </Card>\n        </Link>\n      );\n    }\n\n    return products;\n  }\n\n  getTotalPrice() {\n    let price = 0;\n\n    for(const product of this.state.products) {\n      price += product.count * product.price\n    }\n\n    return price\n  }\n\n  getQuantityButtons(id) {\n    let product = null;\n\n    for(const iProduct of this.state.products) {\n      if(iProduct.id === id) {\n        product = iProduct;\n        break;\n      }\n    }\n\n    return (\n      <ButtonGroup style={{display: 'flex', flexDirection: 'row', marginTop: 30}}>\n        <Button variant='outline-dark' onClick={(e) => this.decrease(e, id)} style={{width: 40}}>-</Button>\n        <Button variant='outline-dark' disabled>{product.count}</Button>\n        <Button variant='outline-dark' onClick={(e) => this.increase(e, id)} style={{width: 40}}>+</Button>\n      </ButtonGroup>\n    )\n  }\n\n  async decrease(e, id) {\n    e.preventDefault();\n\n    let myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    myHeaders.append(\"x-access-token\", localStorage.getItem('token'));\n\n    let requestOptions = {\n      method: 'DELETE',\n      headers: myHeaders,\n      redirect: 'follow'\n    };\n\n    await fetch(window.$ENDPOINT_URL + '/application/products/' + id, requestOptions);\n\n    await this.fetchProducts();\n  }\n\n  async increase(e, id) {\n    e.preventDefault();\n\n    let myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    myHeaders.append(\"x-access-token\", localStorage.getItem('token'));\n\n    let requestOptions = {\n      method: 'POST',\n      headers: myHeaders,\n      redirect: 'follow'\n    };\n\n    await fetch(window.$ENDPOINT_URL + '/application/products/' + id, requestOptions);\n\n    await this.fetchProducts();\n  }\n\n  async clearCart() {\n    let myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    myHeaders.append(\"x-access-token\", localStorage.getItem('token'));\n\n    let requestOptions = {\n      method: 'DELETE',\n      headers: myHeaders,\n      redirect: 'follow'\n    };\n\n    await fetch(window.$ENDPOINT_URL + '/application/products', requestOptions);\n\n    await this.fetchProducts();\n  }\n\n  async delay(delayInms) {\n    return new Promise(resolve  => {\n      setTimeout(() => {\n        resolve(2);\n      }, delayInms);\n    });\n  }\n}\n\nconst styles = {\n  container: {\n    height: \"100%\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\"\n  },\n  cardBody: {\n    width: 300\n  },\n  homeIcon: {\n    height: \"3em\",\n    width: \"3em\",\n    position: \"absolute\",\n    left: 10,\n    top: 0,\n    marginTop: \"0.5em\",\n    marginRight: \"0.5em\"\n  }\n};\n\nexport default Cart;\n"]},"metadata":{},"sourceType":"module"}